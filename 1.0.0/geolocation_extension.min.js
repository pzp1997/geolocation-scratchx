(function(ext){var latitude,longitude;var locationHasBeenCalculated=false;var calculateLocation=function(latLng,cb){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(pos){latitude=pos.coords.latitude;longitude=pos.coords.longitude;cb(latLng?latitude:longitude)},function(err){alert("Failed to locate your position.");cb(0)})}else{alert("Your browser does not support geolocation.");cb(0)}};ext._shutdown=function(){};ext._getStatus=function(){return{status:2,msg:"Ready"}};ext.get_latitude=function(callback){if(locationHasBeenCalculated){callback(latitude)}else{calculateLocation(true,callback)}};ext.get_longitude=function(callback){if(locationHasBeenCalculated){callback(longitude)}else{calculateLocation(false,callback)}};var descriptor={blocks:[["R","longitude","get_longitude"],["R","latitude","get_latitude"]]};ScratchExtensions.register("Geolocation",descriptor,ext)})({});